
### 进程的概念、组成、特征

- 概念
进程(Process)是计算机中的程序关于某数据集合上的一次运行活动，是系统进行**资源分配的基本单位**；程序是指令、数据及其组织形式的描述，进程是程序的进行实体

- 组成
PCB：进程描述信息、进程控制和管理信息、资源分配清单、处理机相关信息
程序段：程序的代码(指令序列)
数据段：运行过程中产生的各种数据

- 特征
动态性：进程是程序的一次执行过程，是动态地产生、变化和消亡的
并发性：内存中有多个进程实体，各进程可并发执行
独立性：进程是能独立运行、独立获得资源、独立接受调度的基本单位
异步性：各进程按各自独立的、不可预知的速度向前推进操作系统要提供“进程同步机制”来解决异步问题
结构性：每个进程都会配置一个PCB；结构上看，进程由程序段、数据段、PCB组成
***
### 进程的状态、转换、组织

- 状态
运行态：占有CPU，并在CPU上运行
就绪态：已经具备运行条件，但由于没有空闲CPU，而暂时不能运行
阻塞态：因等待某一事件而暂时不能运行
创建态：进程正在被创建，操作系统为进程分配资源、初始化PCB
终止态：进程正在从系统中撤销，操作系统会回收进程拥有的资源、撤销PCB

- 转换
![[Pasted image 20240503185151.png]]

- 组织
链式方式：按照进程状态将PCB分为多个队列；操作系统持有指向各个队列的指针
索引方式：根据进程状态的不同，建立几张索引表；操作系统持有指向各个索引表的指针
***
### 进程的控制

进程控制的主要功能是对系统中的所有进程实施有效的管理，它具有创建新进程、撤销已有进程、实现进程状态转换等功能
#### 进程控制相关原语

“关中断指令”和“开中断指令”这两个特权指令实现原子性

- 进程的创建
创建原语：申请空白PCB；为新进程分配所需资源；初始化PCB；将PCB插入就绪队列

- 进程的终止
撤销原语：从PCB集合中找到终止进程的PCB；若进程正在运行，立即剥夺CPU，将CPU分配给其他进程；终止其所有子进程；将该进程拥有的所有资源归还给父进程或操作系统；删除PCB

- 进程的阻塞
阻塞原语：找到要阻塞的进程对应的PCB；保护进程运行现场，将PCB状态信息设置为“阻塞态”，暂时停止进程运行；将PCB插入相应事件的等待队列

- 进程的唤醒
唤醒原语：在事件等待队列中找到PCB；将PCB从等待队列移除，设置进程为就绪态；将PCB插入就绪队列，等待被调度

- 进程的切换
切换原语：将运行环境信息存入PCB；PCB移入相应队列；选择另一个进程执行，并更新其PCB；根据PCB恢复新进程所需的运行环境
***
### 进程的通信

进程间通信(Inter-Process Communication，IPC)是指两个进程之间产生数据交互
#### 共享存储

- 基于数据结构的共享
这种共享方式速度慢、限制多，是一种**低级通信**方式

- 基于存储区的共享
操作系统在内存中划出一块共享存储区，数据的形式、存放位置都由通信进程控制，而不是操作系统；这种共享方式速度很快，是一种**高级通信**方式
#### 消息传递

进程间的数据交换以格式化的消息(Message)为单位；进程通过操作系统提供的“发送消息/接收消息”两个原语进行数据交换

- 直接通信方式
消息发送进程要指明接收进程的ID

- 间接通信方式
通过“信箱”间接地通信因此又称“信箱通信方式
#### 管道通信

“管道”是一个特殊的共享文件，又名pipe文件，其实就是在内存中开辟一个大小固定的内存缓冲区；
管道只能采用半双工通信，某一时间段内只能实现单向的传输，如果要实现双向同时通信，则需要设置两个管道；
各进程要互斥地访问管道(由操作系统实现)；
当管道写满时，写进程将阻塞，直到读进程将管道中的数据取走，即可唤醒写进程；当管道读空时，读进程将阻塞，直到写进程往管道中写入数据，即可唤醒读进程
***

